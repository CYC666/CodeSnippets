<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>IDECodeSnippetCompletionPrefix</key>
	<string></string>
	<key>IDECodeSnippetCompletionScopes</key>
	<array>
		<string>All</string>
	</array>
	<key>IDECodeSnippetContents</key>
	<string>
    // MARK:ä¸Šä¼ å›¾ç‰‡
    func uploadDatas(_ image: UIImage,
                     successBack: @escaping (_ respond: JSON) -&gt; (),
                     falseBack: @escaping () -&gt; ()) {
        
        // ç­¾å
        let equip_uuid: String = getUUID()
        var nonce = String()
        while nonce.count != 8 {
            nonce = String.init(format: "%ld", arc4random() % 100000000)
        }
        let time: String = String.init(format: "%.0f000", Date.init().timeIntervalSince1970)
        let originText = String.init(format: "equip_uuid=%@&amp;nonce=%@&amp;time=%@", equip_uuid, nonce, time)
        let signText = originText.hmac(algorithm: .MD5, key: kPrivateKey)
        
        // è¯·æ±‚å‚æ•°
        let path = String.init(format: "%@%@", kURL, "upload/v1/image/file/upload")
        var dic = [String : String]()
        dic["equip_uuid"] = equip_uuid
        dic["nonce"] = nonce
        dic["time"] = time
        dic["sign"] = signText
        
        // Header
        var header: HTTPHeaders = [:]
        if let token = UserDefaults.standard.value(forKey: kToken) {
            header["TOKEN"] = (token as! String)
        }
        
        var data = image.jpegData(compressionQuality: 0.5)
        if data!.count &gt; 2*1024*1024 {
            data = image.jpegData(compressionQuality: 0.2)
        }
        
        AF.upload(multipartFormData: { (multipartFormData) in
            
            // å‚æ•°
            for p in dic {
                multipartFormData.append(p.value.data(using: .utf8)!, withName: p.key)
            }
            
            // æ•°æ®
            let date = Date.init(timeIntervalSince1970: 0)
            let format = DateFormatter.init()
            format.dateFormat = "yyyyMMddHHmmss"
            let dateText = format.string(from: date) + ".png"
            print(dateText)
            multipartFormData.append(data!, withName: "file", fileName: dateText, mimeType: "image/png")
            
        }, to: path, headers: header).responseJSON { responseJson in
            
            if responseJson.value != nil {
                successBack(JSON(responseJson.value as Any))
            } else {
                falseBack()
            }
            
            // æ¯æ¬¡è¯·æ±‚åæ‰“å°æ•°æ®åˆ°æ§åˆ¶å°
            print("ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜")
            print("è¯·æ±‚åœ°å€:")
            print(path)
            print("è¯·æ±‚å‚æ•°:")
            print(dic)
            print("å“åº”æ•°æ®:")
            print(JSON(responseJson.value as Any))
            
        }
        
    }</string>
	<key>IDECodeSnippetIdentifier</key>
	<string>04CE5A97-C67D-4628-A3E0-91863F424823</string>
	<key>IDECodeSnippetLanguage</key>
	<string>Xcode.SourceCodeLanguage.Swift</string>
	<key>IDECodeSnippetSummary</key>
	<string></string>
	<key>IDECodeSnippetTitle</key>
	<string>Swiftä¸Šä¼ å›¾ç‰‡ç½‘ç»œè¯·æ±‚</string>
	<key>IDECodeSnippetUserSnippet</key>
	<true/>
	<key>IDECodeSnippetVersion</key>
	<integer>2</integer>
</dict>
</plist>
